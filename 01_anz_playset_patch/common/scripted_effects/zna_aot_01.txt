@inner_mega_cannon_distance = 208
@outer_mega_cannon_distance = 438
@sigma_habitat_distance = 245
@sigma_habitat_size = 25
@enigmalith_orbit_distance = 37.5

spawn_great_wall_macripps = {
	system_star = {
		save_event_target_as = this_system_star
	}
	spawn_planet = {
		class = pc_phanon_macripp
		location = fromfrom
		has_ring = no
		orbit_distance_offset = @sigma_habitat_distance
		orbit_angle_offset = 0
		init_effect = {
			save_event_target_as = last_spawned_macripp
			set_name = "MacR.I.P.P. Data Core 1"
			change_pc = pc_phanon_macripp
			set_colony_type = col_phanon_macripp
			add_modifier = {
				modifier = phanon_macripp_mod
				days = -1
			}
			set_planet_entity = {
				entity = "phanon_macRIPP_stage_3_entity"
			}
			set_surveyed = {
				surveyed = yes
				surveyor = FROM
			}
			set_all_comms_surveyed = yes
			clear_blockers = yes
			set_planet_flag = megastructure
			set_planet_flag = macRIPP_planet
		}
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 0
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 120
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 240
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	event_target:last_spawned_macripp = {
		remove_planet = yes
	}
	spawn_planet = {
		class = pc_phanon_macripp
		location = fromfrom
		has_ring = no
		orbit_distance_offset = @sigma_habitat_distance
		orbit_angle_offset = 120
		init_effect = {
			save_event_target_as = last_spawned_macripp
			set_name = "MacR.I.P.P. Data Core 2"
			change_pc = pc_phanon_macripp
			set_colony_type = col_phanon_macripp
			add_modifier = {
				modifier = phanon_macripp_mod
				days = -1
			}
			set_planet_entity = {
				entity = "phanon_macRIPP_stage_3_entity"
			}
			set_surveyed = {
				surveyed = yes
				surveyor = FROM
			}
			set_all_comms_surveyed = yes
			clear_blockers = yes
			set_planet_flag = megastructure
			set_planet_flag = macRIPP_planet
		}
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 0
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 120
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 240
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	event_target:last_spawned_macripp = {
		remove_planet = yes
	}
	spawn_planet = {
		class = pc_phanon_macripp
		location = fromfrom
		has_ring = no
		orbit_distance_offset = @sigma_habitat_distance
		orbit_angle_offset = 240
		init_effect = {
			save_event_target_as = last_spawned_macripp
			set_name = "MacR.I.P.P. Data Core 3"
			change_pc = pc_phanon_macripp
			set_colony_type = col_phanon_macripp
			add_modifier = {
				modifier = phanon_macripp_mod
				days = -1
			}
			set_planet_entity = {
				entity = "phanon_macRIPP_stage_3_entity"
			}
			set_surveyed = {
				surveyed = yes
				surveyor = FROM
			}
			set_all_comms_surveyed = yes
			clear_blockers = yes
			set_planet_flag = megastructure
			set_planet_flag = macRIPP_planet
		}
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 0
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 120
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	spawn_megastructure = {
		type = "aot_macripp_dark_matter_obelisk_core_pe"
		orbit_angle = 240
		orbit_distance = @enigmalith_orbit_distance
		owner = from
		planet = event_target:last_spawned_macripp
	}
	event_target:last_spawned_macripp = {
		remove_planet = yes
	}
}